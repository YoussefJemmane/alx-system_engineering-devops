#!/bin/bash
# 0-world_wide_web
# Usage: ./0-world_wide_web domain [subdomain]
# Audits DNS A records for www, lb-01, web-01, web-02 or a specific subdomain

get_subdomain_info() {
    local domain="$1"
    local sub="$2"
    local fqdn="$sub.$domain"
    local dig_out
    dig_out=$(dig +short -t A $fqdn)
    if [ -n "$dig_out" ]; then
        echo "The subdomain $sub is a A record and points to $dig_out"
    fi
}

main() {
    domain="$1"
    subdomain="$2"
    if [ -z "$subdomain" ]; then
        for sub in www lb-01 web-01 web-02; do
            get_subdomain_info "$domain" "$sub"
        done
    else
        get_subdomain_info "$domain" "$subdomain"
    fi
}

main "$@"
